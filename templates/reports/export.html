{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto py-8">

    <div class="mb-10">
        <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Exportar Dados</h1>
        <p class="text-slate-500 font-medium">Baixe seus dados em diferentes formatos para backup ou integração.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <!-- Products Export -->
        <div class="bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm">
            <div class="flex items-center gap-4 mb-6">
                <div class="w-14 h-14 rounded-2xl bg-indigo-50 flex items-center justify-center">
                    <i data-lucide="package" class="w-7 h-7 text-indigo-600"></i>
                </div>
                <div>
                    <h2 class="text-xl font-black text-slate-900">Produtos</h2>
                    <p class="text-sm text-slate-500">Catálogo completo com variações</p>
                </div>
            </div>

            <div class="space-y-4 mb-6">
                <label class="flex items-center gap-3 cursor-pointer group">
                    <input type="checkbox" id="include-variants" checked
                           class="w-5 h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
                    <span class="text-sm font-medium text-slate-700 group-hover:text-slate-900">Incluir variações</span>
                </label>
                <label class="flex items-center gap-3 cursor-pointer group">
                    <input type="checkbox" id="include-inactive"
                           class="w-5 h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
                    <span class="text-sm font-medium text-slate-700 group-hover:text-slate-900">Incluir inativos</span>
                </label>
            </div>

            <div class="flex flex-wrap gap-3">
                <a href="#" onclick="downloadProducts('csv')"
                   class="flex-1 px-4 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all text-center flex items-center justify-center gap-2">
                    <i data-lucide="file-text" class="w-4 h-4"></i>
                    CSV
                </a>
                <a href="#" onclick="downloadProducts('excel')"
                   class="flex-1 px-4 py-3 bg-green-600 text-white font-bold text-sm rounded-xl hover:bg-green-700 transition-all text-center flex items-center justify-center gap-2">
                    <i data-lucide="table" class="w-4 h-4"></i>
                    Excel
                </a>
                <a href="#" onclick="downloadProducts('json')"
                   class="flex-1 px-4 py-3 bg-slate-700 text-white font-bold text-sm rounded-xl hover:bg-slate-800 transition-all text-center flex items-center justify-center gap-2">
                    <i data-lucide="braces" class="w-4 h-4"></i>
                    JSON
                </a>
            </div>
        </div>

        <!-- Movements Export -->
        <div class="bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm">
            <div class="flex items-center gap-4 mb-6">
                <div class="w-14 h-14 rounded-2xl bg-amber-50 flex items-center justify-center">
                    <i data-lucide="activity" class="w-7 h-7 text-amber-600"></i>
                </div>
                <div>
                    <h2 class="text-xl font-black text-slate-900">Movimentações</h2>
                    <p class="text-sm text-slate-500">Histórico do ledger de estoque</p>
                </div>
            </div>

            <div class="space-y-4 mb-6">
                <label class="text-sm font-medium text-slate-700 block">Período</label>
                <select id="movements-days" class="w-full px-4 py-3 bg-slate-50 border-0 rounded-xl text-sm font-bold focus:ring-2 focus:ring-amber-500">
                    <option value="7">Últimos 7 dias</option>
                    <option value="30" selected>Últimos 30 dias</option>
                    <option value="90">Últimos 90 dias</option>
                    <option value="365">Último ano</option>
                </select>
            </div>

            <a href="#" onclick="downloadMovements()"
               class="w-full px-4 py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2">
                <i data-lucide="download" class="w-4 h-4"></i>
                Exportar CSV
            </a>
        </div>

    </div>

    <!-- Format Info -->
    <div class="mt-10 bg-slate-50 rounded-2xl p-6 border border-slate-100">
        <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
            <i data-lucide="info" class="w-5 h-5 text-slate-400"></i>
            Sobre os Formatos
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
            <div>
                <span class="font-bold text-emerald-600">CSV</span>
                <p class="text-slate-500">Compatível com qualquer planilha. Ideal para reimportação.</p>
            </div>
            <div>
                <span class="font-bold text-green-600">Excel</span>
                <p class="text-slate-500">Formato nativo Microsoft Excel com formatação.</p>
            </div>
            <div>
                <span class="font-bold text-slate-600">JSON</span>
                <p class="text-slate-500">Para integrações com APIs e sistemas externos.</p>
            </div>
        </div>
    </div>

</div>

<script>
    function downloadProducts(format) {
        const variants = document.getElementById('include-variants').checked;
        const inactive = document.getElementById('include-inactive').checked;

        let url = `/app/export/products/${format}/?variants=${variants}&inactive=${inactive}`;
        window.location.href = url;
    }

    function downloadMovements() {
        const days = document.getElementById('movements-days').value;
        window.location.href = `/app/export/movements/csv/?days=${days}`;
    }

    lucide.createIcons();
</script>
{% endblock %}
