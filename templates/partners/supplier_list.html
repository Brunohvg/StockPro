{% extends 'base.html' %}

{% block content %}
<div class="mb-10 flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
        <div class="flex items-center gap-2 mb-2">
            <span class="px-3 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase tracking-widest rounded-full">Base de Conhecimento</span>
        </div>
        <h1 class="text-3xl font-black text-slate-900">Fornecedores</h1>
        <p class="text-slate-500">Gerencie parceiros para automação de entradas e compras.</p>
    </div>
    <a href="{% url 'partners:supplier_create' %}" class="inline-flex items-center justify-center gap-3 px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-2xl transition-all shadow-xl shadow-indigo-600/20 active:scale-95 group">
        <i data-lucide="plus-circle" class="w-5 h-5 group-hover:rotate-90 transition-transform"></i>
        <span>Adicionar Fornecedor</span>
    </a>
</div>

<div class="bg-white border border-slate-200 rounded-[2.5rem] shadow-sm overflow-hidden mb-8">
    <div class="overflow-x-auto">
        <table class="w-full text-left border-separate border-spacing-0">
            <thead>
                <tr class="bg-slate-50/50">
                    <th class="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-100">Parceiro</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-100">CNPJ</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-100">Contatos</th>
                    <th class="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-100">Status</th>
                    <th class="px-8 py-5 border-b border-slate-100"></th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-50">
                {% for supplier in suppliers %}
                <tr class="hover:bg-indigo-50/30 transition-all group">
                    <td class="px-8 py-6">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center text-slate-400 group-hover:bg-white group-hover:text-indigo-600 group-hover:shadow-sm transition-all">
                                <i data-lucide="building-2" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <div class="font-black text-slate-900 group-hover:text-indigo-600 transition-colors uppercase leading-tight">{{ supplier.display_name }}</div>
                                <div class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">{{ supplier.company_name|truncatechars:30 }}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-8 py-6">
                        <span class="px-3 py-1.5 bg-slate-100 rounded-lg font-mono text-xs text-slate-600 font-bold">
                            {{ supplier.formatted_cnpj|default:"---" }}
                        </span>
                    </td>
                    <td class="px-8 py-6">
                        <div class="flex flex-col gap-1">
                            <div class="flex items-center gap-2 text-sm text-slate-600">
                                <i data-lucide="mail" class="w-3.5 h-3.5 opacity-40"></i>
                                {{ supplier.email|default:"---" }}
                            </div>
                            {% if supplier.phone %}
                            <div class="flex items-center gap-2 text-xs text-slate-400 font-bold">
                                <i data-lucide="phone" class="w-3.5 h-3.5 opacity-40"></i>
                                {{ supplier.phone }}
                            </div>
                            {% endif %}
                        </div>
                    </td>
                    <td class="px-8 py-6">
                        {% if supplier.is_active %}
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                            <span class="text-[10px] font-black text-emerald-700 uppercase tracking-widest">Ativo</span>
                        </div>
                        {% else %}
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full bg-slate-300"></span>
                            <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Inativo</span>
                        </div>
                        {% endif %}
                    </td>
                    <td class="px-8 py-6 text-right">
                        <div class="flex items-center justify-end gap-2">
                            <a href="{% url 'partners:supplier_edit' supplier.pk %}" class="inline-flex items-center justify-center w-10 h-10 bg-slate-50 text-slate-400 hover:bg-indigo-600 hover:text-white hover:shadow-lg hover:shadow-indigo-200 rounded-xl transition-all" title="Editar">
                                <i data-lucide="pencil" class="w-4 h-4"></i>
                            </a>
                            <form action="{% url 'partners:supplier_delete' supplier.pk %}" method="post" class="inline" onsubmit="return confirm('Tem certeza que deseja excluir este fornecedor?');">
                                {% csrf_token %}
                                <button type="submit" class="inline-flex items-center justify-center w-10 h-10 bg-slate-50 text-rose-400 hover:bg-rose-600 hover:text-white hover:shadow-lg hover:shadow-rose-200 rounded-xl transition-all" title="Excluir">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="px-8 py-32 text-center">
                        <div class="max-w-xs mx-auto">
                            <div class="w-20 h-20 rounded-[2rem] bg-slate-50 flex items-center justify-center text-slate-200 mx-auto mb-6">
                                <i data-lucide="truck" class="w-10 h-10"></i>
                            </div>
                            <h3 class="text-xl font-black text-slate-900 mb-2">Nenhum Fornecedor</h3>
                            <p class="text-slate-500 text-sm mb-8">Comece cadastrando seus parceiros para facilitar a importação de notas fiscais.</p>
                            <a href="{% url 'partners:supplier_create' %}" class="inline-flex items-center gap-2 text-indigo-600 font-black text-sm hover:gap-4 transition-all">
                                Criar Primeiro Cadastro <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
